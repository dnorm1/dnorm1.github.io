!function(e,a){a.behaviors.saveforlater={attach:function(a,t){var r=!1,s=e(".save-for-later-notification"),n=document.head.getElementsByTagName("link");const o=document.getElementsByClassName("save-for-later-number");e(document).on("click",".save-for-later",(function(){e(".save-for-later .ajax-progress").remove();var a=e(this).attr("data-id"),t=e('.save-for-later[data-id="'+a+'"]');e(this).append('<span class="ajax-progress ajax-progress-throbber"><span class="throbber">&nbsp;</span></span>'),!1===r&&(r=!0,e.ajax({dataType:"json",type:"POST",url:"/diabetes-and-me/save-for-later/"+a,cache:!1,success:function(e){v(e,t,o,s),t.find(".ajax-progress").remove(),r=!1},error:function(){t.find(".ajax-progress").remove(),r=!1}}))}));var i=e.cookie("SSESSDiabetesAndMeSave");if(i){for(var l in n)if(n.hasOwnProperty(l)){var f=n[l];if("shortlink"===f.rel){var c=f.href.substring(f.href.lastIndexOf("/")+1);e(".block-saveforlaterblock .save-for-later, .block-saveforlaterblock-2 .save-for-later, .block-saveforlaterblock-3 .save-for-later").attr("data-id",c)}}var d=i.replace(/[\[\]']+/g,"").split(",");if(0===document.getElementsByClassName("save-for-later").length&&d.length>0)for(const e of o)e.innerHTML=d.length,e.style.display="inline";e(".save-for-later").each((function(a){var t=e(this),r=e(this).attr("data-id"),n=d.indexOf(r)>=0,i="Remove<span>page</span>";if(t.parent().hasClass("embedded-saveable-snippet"))i="Remove snippet";n?v({saved:!0,number:d.length,buttonText:i},t,o,s,!1):v({saved:!1,number:d.length,buttonText:"Save<span>for later</span>"},t,o,s,!1)}))}function v(a,t,r,s,n=!0){for(const o of r)!1===a.saved?(t.removeClass("active"),a.number.toString().substring(0,1)>0?(o.innerHTML=a.number,o.style.display="inline"):o.style.display="none",s.hide()):(t.addClass("active"),o.innerHTML=a.number,o.style.display="inline",n&&(s.fadeIn(1e3),s.find(".close").on("click",(function(){s.fadeOut(),e(this).off("click")}))));t.html(a.buttonText)}}}}(window.jQuery,Drupal);